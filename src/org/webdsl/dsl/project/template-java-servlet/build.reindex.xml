<project name="webdsl-reindex" default="reindex">

  <property name="targetdir" value="WEB-INF/classes"/>
  <property name="librarydir" value="WEB-INF/lib"/>

  <target name="reindex">
      <input
        message="Please enter max amount of memory (MB) to use or hit enter"
        addproperty="maxmem"
        defaultvalue="2048"
      />
      <condition property="entities" value="">
         <not>
            <isset property="entities"/>
         </not>
      </condition>
    <java classname="webdsl.generated.search.IndexManager" maxmemory="${maxmem}m" failonerror="true" dir="." fork="true">
    	<jvmarg value="-Xss8m"/>
      <classpath>
        <pathelement location="${targetdir}"/>
        <fileset dir="${librarydir}" includes="*.jar"/>
      </classpath>
      <arg line="${entities}" />
    </java>
  </target>
</project>